<app-header-one></app-header-one>

<div class="page-title-area page-title-bg2">
    <div class="container">
        <div class="page-title-content">
            <h2>Checkout</h2>
        </div>
    </div>
</div>

<section class="checkout-area ptb-100">
    <div class="container">
        <div class="user-actions">
            <i class='bx bx-log-in'></i>
            <span><a>Please Fill out you billing details to proceed to payment</a></span>
        </div>

        <form [formGroup]="form" (ngSubmit)="submitForm()">
            <div class="row">
                <div class="col-lg-6 col-md-12">
                    <div class="billing-details">
                        <h3 class="title">Billing Details</h3>

                        <div class="row">
                            <div class="col-lg-6 col-md-6">
                                <div class="form-group">
                                    <label>First Name <span class="required">*</span></label>
                                    <input type="text" class="form-control" formControlName="name" name="name" [ngClass]="{ 'is-invalid': submitted && f.name.errors && f.name.touched}">
                                    <div *ngIf="submitted && f.name.errors && f.name.touched" class="invalid-feedback">
                                        <div *ngIf="f.name.errors.required">First Name is required</div>
                                    </div>
                                    </div>
                                </div>
                            <div class="col-lg-6 col-md-6">
                                <div class="form-group">
                                    <label>Last Name <span class="required">*</span></label>
                                    <input type="text" class="form-control" formControlName="lastname" [ngClass]="{ 'is-invalid': submitted && f.lastname.errors && f.lastname.touched}">
                                    <div *ngIf="submitted && f.lastname.errors && f.lastname.touched" class="invalid-feedback">
                                        <div *ngIf="f.lastname.errors.required">Last Name is required</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12 col-md-6">
                                <div class="form-group">
                                    <label>Address <span class="required">*</span></label>
                                    <input type="text" class="form-control" formControlName="adress" [ngClass]="{ 'is-invalid': submitted && f.adress.errors && f.adress.touched}">
                                    <div *ngIf="submitted && f.adress.errors && f.adress.touched" class="invalid-feedback">
                                        <div *ngIf="f.adress.errors.required">Adresse is required</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-6">
                                <div class="form-group">
                                    <label>State<span class="required">*</span></label>
                                    <input type="text" class="form-control" formControlName="state" [ngClass]="{ 'is-invalid': submitted && f.state.errors && f.state.touched}">
                                    <div *ngIf="submitted && f.state.errors && f.state.touched" class="invalid-feedback">
                                        <div *ngIf="f.state.errors.required">State Name is required</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-6">
                                <div class="form-group">
                                    <label>Postcode / Zip <span class="required">*</span></label>
                                    <input type="text" class="form-control" formControlName="zipcode" [ngClass]="{ 'is-invalid': submitted && f.zipcode.errors && f.zipcode.touched}">
                                    <div *ngIf="submitted && f.zipcode.errors && f.zipcode.touched" class="invalid-feedback">
                                        <div *ngIf="f.zipcode.errors.required">Zid Code is required</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-6">
                                <div class="form-group">
                                    <label>Email Address <span class="required">*</span></label>
                                    <input type="email" class="form-control" formControlName="email" [ngClass]="{ 'is-invalid': submitted && f.email.errors && f.email.touched}">
                                    <div *ngIf="submitted && f.email.errors && f.email.touched" class="invalid-feedback">
                                        <div *ngIf="f.email.errors.required">Please Enter A Valid Email</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-6">
                                <div class="form-group">
                                    <label>Phone <span class="required">*</span></label>
                                    <input type="text" class="form-control" formControlName="phone" [ngClass]="{ 'is-invalid': submitted && f.phone.errors && f.phone.touched}">
                                    <div *ngIf="submitted && f.phone.errors && f.phone.touched" class="invalid-feedback">
                                        <div *ngIf="f.phone.errors.required">Phone Number is required</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12 col-md-12">
                                <div class="form-group">
                                    <textarea name="notes" id="notes" cols="30" rows="5" placeholder="Order Notes" class="form-control" formControlName="ordernotes"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 col-md-12">
                    <div class="order-details">
                        <h3 class="title">Your Order</h3>

                        <div class="order-table table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col">Product Name</th>
                                        <th scope="col">Total</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr *ngFor="let cartItem of cartProducts">
                                        <td class="product-name">
                                            <a routerLink="/products-details">{{cartItem.ref_prod}}</a>
                                        </td>

                                        <td class="product-total">
                                            <span class="subtotal-amount">${{cartItem.prix}}.00</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="order-subtotal">
                                            <span>Cart Subtotal</span>
                                        </td>

                                        <td class="order-subtotal-price">
                                            <span class="order-subtotal-amount">${{totalValue | number}}.00</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="order-shipping">
                                            <span>Shipping</span>
                                        </td>

                                        <td class="shipping-price">
                                            <span>FREE</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="total-price">
                                            <span>Order Total</span>
                                        </td>

                                        <td class="product-subtotal">
                                            <span class="subtotal-amount">${{totalValue | number}}.00</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="payment-box">
                            <div class="payment-method">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <button class="btn btn-md btn-primary" type="submit">Comfirm Your Information</button>
                                <br><br><br>
                              <div [hidden]="paidFor" #paypal></div>
                            </div>

                            <div  *ngIf="!paidFor">


                            </div>

                            <div *ngIf=paidFor>
                                {{redirectSuccesPayment()}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</section>
